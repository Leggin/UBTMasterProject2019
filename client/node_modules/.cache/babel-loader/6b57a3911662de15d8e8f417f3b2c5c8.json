{"ast":null,"code":"import _classCallCheck from \"/home/nicolas/Dokumente/Github/drizzle_react/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/nicolas/Dokumente/Github/drizzle_react/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/nicolas/Dokumente/Github/drizzle_react/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/nicolas/Dokumente/Github/drizzle_react/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/nicolas/Dokumente/Github/drizzle_react/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/nicolas/Dokumente/Github/drizzle_react/client/src/TaskTableComponent.js\";\nimport React from \"react\";\nimport { Table, Icon } from 'semantic-ui-react';\nimport * as c from './Constants.js';\nimport Tasks from \"./Tasks\";\nimport \"./TaskTableComponent.css\";\nimport { log } from \"util\";\n\nvar TaskTableComponent =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TaskTableComponent, _React$Component);\n\n  function TaskTableComponent(props) {\n    var _this;\n\n    _classCallCheck(this, TaskTableComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TaskTableComponent).call(this, props));\n    _this.state = {\n      getTasksDataKey: null,\n      tasksData: [],\n      getTaskByIdDataKeys: []\n    };\n    _this.first = true;\n    return _this;\n  }\n\n  _createClass(TaskTableComponent, [{\n    key: \"getTaskEnumById\",\n    value: function getTaskEnumById(id) {\n      var res;\n      c.TASKTYPES.forEach(function (taskType) {\n        if (Number(taskType.value) === Number(id)) {\n          res = taskType.text;\n        }\n      });\n      return res;\n    }\n  }, {\n    key: \"formatTaskRequirements\",\n    value: function formatTaskRequirements(reqs) {\n      var reqString = \"\";\n      reqs.forEach(function (req) {\n        reqString += req + \", \";\n      });\n      return reqString.slice(0, reqString.length - 2);\n    }\n  }, {\n    key: \"formatTaskStatus\",\n    value: function formatTaskStatus(status) {\n      if (status) {\n        return React.createElement(Icon, {\n          name: \"checkmark\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(Icon, {\n        name: \"attention\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"decisionDataCallback\",\n    value: function decisionDataCallback(taskIndex, decisionData) {\n      console.log(taskIndex, decisionData);\n    }\n  }, {\n    key: \"createTableContent\",\n    value: function createTableContent() {\n      var _this2 = this;\n\n      var contract = this.props.drizzle.contracts.ContractCollaborationManager;\n      var cells = [];\n      var tasks = Tasks.getAllTasksWithDecision(contract, this.props.drizzleState, this.state.getTaskByIdDataKeys, this.state.getTasksDataKey, this.decisionDataCallback.bind(this));\n      tasks.forEach(function (task) {\n        //console.log(\"TASKRESOURCE: \", task.resource);\n        cells.push(React.createElement(Table.Row, {\n          key: task.id,\n          negative: !task.status,\n          positive: task.status,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, task.id), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, task.description), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, _this2.getTaskEnumById(task.tasktype)), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, task.resource), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, _this2.formatTaskRequirements(task.requirements)), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, _this2.formatTaskStatus(task.status)), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, task.decisionLocal)));\n      });\n      console.log(\"Cells\", cells);\n      return cells;\n    }\n  }, {\n    key: \"taskDataCallback\",\n    value: function taskDataCallback(index, taskData) {\n      console.log(index, taskData);\n    }\n  }, {\n    key: \"createTableContentPromise\",\n    value: function createTableContentPromise() {\n      var _this3 = this;\n\n      var contract = this.props.drizzle.contracts.ContractCollaborationManager;\n      var cells = [];\n      var tasks = Tasks.getAllTasksWithDecision(contract, this.taskDataCallback.bind(this));\n      tasks.forEach(function (task) {\n        //console.log(\"TASKRESOURCE: \", task.resource);\n        cells.push(React.createElement(Table.Row, {\n          key: task.id,\n          negative: !task.status,\n          positive: task.status,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, task.id), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, task.description), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, _this3.getTaskEnumById(task.tasktype)), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, task.resource), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, _this3.formatTaskRequirements(task.requirements)), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, _this3.formatTaskStatus(task.status)), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, task.decisionLocal)));\n      });\n      console.log(\"Cells\", cells);\n      return cells;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var contract = this.props.drizzle.contracts.ContractCollaborationManager;\n      var ccmState = this.props.drizzleState.contracts.ContractCollaborationManager;\n      var getTasksDataKey = contract.methods.getTasks.cacheCall();\n      var getTaskCountKey = contract.methods.getTaskCount.cacheCall();\n      var taskCount = ccmState.getTaskCount[getTaskCountKey];\n      taskCount = taskCount ? Number(ccmState.getTaskCount[getTaskCountKey].value) : taskCount;\n      var getTaskByIdDataKeys = [];\n      var getIntegerDecisionKeys = [];\n\n      for (var i = 0; i <= taskCount; i++) {\n        getTaskByIdDataKeys.push(contract.methods.getTaskById.cacheCall(i));\n      }\n\n      console.log(\"mount\");\n      var tableCells = this.createTableContentPromise();\n      this.setState({\n        getTasksDataKey: getTasksDataKey,\n        getTaskByIdDataKeys: getTaskByIdDataKeys,\n        tableCells: tableCells\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"task-table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(Table, {\n        celled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(Table.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(Table.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Task Id\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Description\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Type\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"Owner\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"Requirements\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"Status\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"Local Decision Value\"))), React.createElement(Table.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, this.state.tableCells)));\n    }\n  }]);\n\n  return TaskTableComponent;\n}(React.Component);\n\nexport default TaskTableComponent;","map":{"version":3,"sources":["/home/nicolas/Dokumente/Github/drizzle_react/client/src/TaskTableComponent.js"],"names":["React","Table","Icon","c","Tasks","log","TaskTableComponent","props","state","getTasksDataKey","tasksData","getTaskByIdDataKeys","first","id","res","TASKTYPES","forEach","taskType","Number","value","text","reqs","reqString","req","slice","length","status","taskIndex","decisionData","console","contract","drizzle","contracts","ContractCollaborationManager","cells","tasks","getAllTasksWithDecision","drizzleState","decisionDataCallback","bind","task","push","description","getTaskEnumById","tasktype","resource","formatTaskRequirements","requirements","formatTaskStatus","decisionLocal","index","taskData","taskDataCallback","ccmState","methods","getTasks","cacheCall","getTaskCountKey","getTaskCount","taskCount","getIntegerDecisionKeys","i","getTaskById","tableCells","createTableContentPromise","setState","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Table, Icon } from 'semantic-ui-react'\nimport * as c from './Constants.js'\nimport Tasks from \"./Tasks\"\nimport \"./TaskTableComponent.css\"\nimport { log } from \"util\";\n\nclass TaskTableComponent extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            getTasksDataKey: null,\n            tasksData: [],\n            getTaskByIdDataKeys: [],\n        }\n        this.first = true;\n    }\n\n    getTaskEnumById(id) {\n        let res;\n        c.TASKTYPES.forEach(taskType => {\n            if (Number(taskType.value) === Number(id)) {\n                res = taskType.text;\n            }\n        });\n        return res;\n    }\n\n    formatTaskRequirements(reqs) {\n        let reqString = \"\";\n        reqs.forEach(req => {\n            reqString += req + \", \"\n        });\n        return reqString.slice(0, reqString.length - 2)\n    }\n\n    formatTaskStatus(status) {\n        if (status) {\n            return <Icon name='checkmark' />\n        }\n        return <Icon name='attention' />\n    }\n\n    decisionDataCallback(taskIndex, decisionData) {\n        console.log(taskIndex, decisionData);\n\n    }\n\n    createTableContent() {\n        const contract = this.props.drizzle.contracts.ContractCollaborationManager;\n\n        let cells = [];\n\n        let tasks = Tasks.getAllTasksWithDecision(contract, this.props.drizzleState, this.state.getTaskByIdDataKeys, this.state.getTasksDataKey, this.decisionDataCallback.bind(this));\n        tasks.forEach(task => {\n            //console.log(\"TASKRESOURCE: \", task.resource);\n            cells.push(<Table.Row key={task.id} negative={!task.status} positive={task.status}>\n                <Table.Cell>{task.id}</Table.Cell>\n                <Table.Cell>{task.description}</Table.Cell>\n                <Table.Cell>{this.getTaskEnumById(task.tasktype)}</Table.Cell>\n                <Table.Cell>{task.resource}</Table.Cell>\n                <Table.Cell>{this.formatTaskRequirements(task.requirements)}</Table.Cell>\n                <Table.Cell  >{this.formatTaskStatus(task.status)}</Table.Cell>\n                <Table.Cell  >{task.decisionLocal}</Table.Cell>\n\n            </Table.Row>);\n        });\n        console.log(\"Cells\", cells);\n\n        return (cells);\n    }\n\n    taskDataCallback(index, taskData) {\n        console.log(index, taskData);\n\n    }\n\n    createTableContentPromise() {\n        const contract = this.props.drizzle.contracts.ContractCollaborationManager;\n\n        let cells = [];\n\n        let tasks = Tasks.getAllTasksWithDecision(contract, this.taskDataCallback.bind(this));\n        tasks.forEach(task => {\n            //console.log(\"TASKRESOURCE: \", task.resource);\n            cells.push(<Table.Row key={task.id} negative={!task.status} positive={task.status}>\n                <Table.Cell>{task.id}</Table.Cell>\n                <Table.Cell>{task.description}</Table.Cell>\n                <Table.Cell>{this.getTaskEnumById(task.tasktype)}</Table.Cell>\n                <Table.Cell>{task.resource}</Table.Cell>\n                <Table.Cell>{this.formatTaskRequirements(task.requirements)}</Table.Cell>\n                <Table.Cell  >{this.formatTaskStatus(task.status)}</Table.Cell>\n                <Table.Cell  >{task.decisionLocal}</Table.Cell>\n\n            </Table.Row>);\n        });\n        console.log(\"Cells\", cells);\n\n        return (cells);\n    }\n\n    componentDidMount() {\n        const contract = this.props.drizzle.contracts.ContractCollaborationManager;\n        const ccmState = this.props.drizzleState.contracts.ContractCollaborationManager;\n\n        const getTasksDataKey = contract.methods.getTasks.cacheCall();\n        const getTaskCountKey = contract.methods.getTaskCount.cacheCall();\n\n        let taskCount = ccmState.getTaskCount[getTaskCountKey];\n        taskCount = (taskCount) ? Number(ccmState.getTaskCount[getTaskCountKey].value) : taskCount;\n        const getTaskByIdDataKeys = [];\n        const getIntegerDecisionKeys = [];\n\n        for (let i = 0; i <= taskCount; i++) {\n            getTaskByIdDataKeys.push(contract.methods.getTaskById.cacheCall(i));\n        }\n        console.log(\"mount\");\n        let tableCells = this.createTableContentPromise();\n\n        this.setState({ getTasksDataKey, getTaskByIdDataKeys, tableCells });\n    }\n\n    render() {\n\n\n        return (\n            <div className=\"task-table\">\n                <Table celled>\n                    <Table.Header>\n                        <Table.Row>\n                            <Table.HeaderCell>Task Id</Table.HeaderCell>\n                            <Table.HeaderCell>Description</Table.HeaderCell>\n                            <Table.HeaderCell>Type</Table.HeaderCell>\n                            <Table.HeaderCell>Owner</Table.HeaderCell>\n                            <Table.HeaderCell>Requirements</Table.HeaderCell>\n                            <Table.HeaderCell>Status</Table.HeaderCell>\n                            <Table.HeaderCell>Local Decision Value</Table.HeaderCell>\n\n                        </Table.Row>\n                    </Table.Header>\n\n                    <Table.Body>\n\n                        {this.state.tableCells}\n\n                    </Table.Body>\n                </Table>\n            </div>\n        );\n    }\n}\n\nexport default TaskTableComponent;\n"]},"metadata":{},"sourceType":"module"}