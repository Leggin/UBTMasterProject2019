{"ast":null,"code":"import _defineProperty from \"/home/nicolas/Dokumente/Github/drizzle_react/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/nicolas/Dokumente/Github/drizzle_react/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/nicolas/Dokumente/Github/drizzle_react/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/nicolas/Dokumente/Github/drizzle_react/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/nicolas/Dokumente/Github/drizzle_react/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/nicolas/Dokumente/Github/drizzle_react/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/nicolas/Dokumente/Github/drizzle_react/client/src/AddDecisionComponent.js\";\nimport React from \"react\";\nimport * as c from './Constants.js';\nimport { Dropdown, Button } from 'semantic-ui-react';\nimport Tasks from \"./Tasks\";\n\nvar AddDecisionComponent =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AddDecisionComponent, _React$Component);\n\n  function AddDecisionComponent(props) {\n    var _this;\n\n    _classCallCheck(this, AddDecisionComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddDecisionComponent).call(this, props));\n    _this.state = {\n      selectedTask: null,\n      getTasksDataKey: \"\",\n      getTaskByIdDataKeys: \"\",\n      getPayloadsDataKey: \"\",\n      getIntPayloadCountKey: \"\",\n      getStringPayloadCountKey: \"\",\n      intPayloadOptions: [],\n      stringPayloadOptions: [{\n        key: 1,\n        value: 2,\n        text: \"ID: 0| Payload: \".concat(3)\n      }],\n      decisionType: {\n        Text: \"\"\n      }\n    };\n    _this.decisionTypes = c.DECISIONTYPES;\n    _this.operator = c.OPERATORS;\n    _this.gatewayTypes = c.GATEWAYTPYES;\n    return _this;\n  }\n\n  _createClass(AddDecisionComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var contract = this.props.drizzle.contracts.ContractCollaborationManager;\n      var getTasksDataKey = contract.methods.getTasks.cacheCall();\n      var intPayloadCountKey = contract.methods.getGlobalIntegerPayloadCount.cacheCall();\n      var getTaskCountKey = contract.methods.getTaskCount.cacheCall();\n      var ccmState = this.props.drizzleState.contracts.ContractCollaborationManager;\n      var taskCount = ccmState.getTaskCount[getTaskCountKey];\n      taskCount = taskCount ? Number(taskCount.value) : 150;\n      var getTaskByIdDataKeys = [];\n\n      for (var i = 0; i <= taskCount; i++) {\n        getTaskByIdDataKeys.push(contract.methods.getTaskById.cacheCall(i));\n      }\n\n      this.setIntegerPayloadOptions(contract, ccmState);\n      this.setStringPayloadOptions(contract, ccmState);\n      this.setState({\n        getTasksDataKey: getTasksDataKey,\n        getTaskByIdDataKeys: getTaskByIdDataKeys,\n        intPayloadCountKey: intPayloadCountKey\n      });\n    }\n  }, {\n    key: \"setIntegerPayloadOptions\",\n    value: function setIntegerPayloadOptions(contract, ccmState) {\n      var _this2 = this;\n\n      contract.methods.getGlobalIntegerPayloadCount().call().then(function (count) {\n        var intPayloadOptions = [];\n\n        for (var i = 0; i < count; i++) {\n          var key = contract.methods.getGlobalIntPayloadValueById.cacheCall(i);\n          var payload = ccmState.getGlobalIntPayloadValueById[key];\n\n          if (payload) {\n            intPayloadOptions.push({\n              key: i,\n              value: payload.value,\n              text: \"ID: \".concat(i, \" | Payload: \").concat(payload.value)\n            });\n          }\n        }\n\n        _this2.setState({\n          intPayloadOptions: intPayloadOptions\n        });\n      });\n    }\n  }, {\n    key: \"setStringPayloadOptions\",\n    value: function setStringPayloadOptions(contract, ccmState) {\n      var _this3 = this;\n\n      contract.methods.getGlobalStringPayloadCount().call().then(function (count) {\n        var stringPayloadOptions = [];\n\n        _this3.setState({\n          stringPayloadOptions: stringPayloadOptions\n        });\n\n        for (var i = 0; i < count; i++) {\n          var key = contract.methods.getGlobalStringPayloadValueById.cacheCall(i); // contract.methods.getGlobalStringPayloadValueById(i).call().then((payload) => {\n          //     console.log(\"payload!!!\", payload);\n          //     let a = []\n          //     a = a.concat(this.state.stringPayloadOptions);\n          //     console.log(\"asdfasdfasdfasdf\", a);\n          //     a = a.push({ key: payload, value: payload, text: `ID: ${i}| Payload: ${payload}` });\n          //     this.setState({ stringPayloadOptions: a });\n          //     //this.setState({ stringPayloadOptions: this.state.stringPayloadOptions.push({ key: payload, value: payload, text: `ID: 0| Payload: ${payload}` }) });\n          // });\n\n          var payload = ccmState.getGlobalStringPayloadValueById[key];\n\n          if (payload) {\n            stringPayloadOptions.push({\n              key: i,\n              value: payload.value,\n              text: \"ID: \".concat(i, \" | Payload: \").concat(payload.value)\n            });\n          }\n        }\n\n        _this3.setState({\n          stringPayloadOptions: stringPayloadOptions\n        });\n      });\n    }\n  }, {\n    key: \"getTaskDropdownOptions\",\n    value: function getTaskDropdownOptions() {\n      var tasks = Tasks.getAllTasks(this.props.drizzleState, this.state.getTaskByIdDataKeys, this.state.getTasksDataKey);\n      var options = [];\n      tasks.forEach(function (task) {\n        options.push({\n          key: task.id,\n          value: task.id,\n          text: \"ID: \".concat(task.id, \" | Description: \").concat(task.description)\n        });\n      });\n      return options;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this,\n          _React$createElement;\n\n      var taskOptions = this.getTaskDropdownOptions();\n      return React.createElement(\"form\", {\n        className: \"add-decision-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"select-task-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Dropdown, {\n        placeholder: \"Select Task\",\n        onChange: function onChange(event, data) {\n          _this4.setState({\n            selectedTask: data.value\n          });\n        },\n        fluid: true,\n        selection: true,\n        options: taskOptions,\n        value: this.state.selectedTask,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(Dropdown, (_React$createElement = {\n        placeholder: \"Select Type\",\n        fluid: true,\n        selection: true,\n        onChange: function onChange(event, data) {\n          _this4.setState({\n            decisionType: data.value\n          });\n        }\n      }, _defineProperty(_React$createElement, \"fluid\", true), _defineProperty(_React$createElement, \"selection\", true), _defineProperty(_React$createElement, \"options\", c.DECISIONTYPES), _defineProperty(_React$createElement, \"value\", this.state.decisionType), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement))), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(Button.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Button, {\n        active: active,\n        type: \"button\",\n        color: active ? 'red' : null,\n        onClick: function onClick() {},\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Cancel\"), React.createElement(Button.Or, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }), React.createElement(Button, {\n        active: active,\n        type: \"button\",\n        color: active ? 'red' : null,\n        onClick: function onClick(a, b) {\n          console.log(a, b);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Save\"))), this.state.decisionType === 1 && React.createElement(\"label\", {\n        className: \"select-payload-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(Dropdown, {\n        placeholder: \"Select Global Payload\",\n        onChange: function onChange(event, data) {\n          _this4.setState({\n            selectedIntPayload: data.value\n          });\n        },\n        fluid: true,\n        selection: true,\n        options: this.state.intPayloadOptions,\n        value: this.state.selectedIntPayload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      })), this.state.decisionType === 0 && React.createElement(\"label\", {\n        className: \"select-payload-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(Dropdown, {\n        placeholder: \"Select Global Payload\",\n        onChange: function onChange(event, data) {\n          _this4.setState({\n            selectedStringPayload: data.value\n          });\n        },\n        fluid: true,\n        selection: true,\n        options: this.state.stringPayloadOptions,\n        value: this.state.selectedStringPayload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return AddDecisionComponent;\n}(React.Component);\n\nexport default AddDecisionComponent;","map":{"version":3,"sources":["/home/nicolas/Dokumente/Github/drizzle_react/client/src/AddDecisionComponent.js"],"names":["React","c","Dropdown","Button","Tasks","AddDecisionComponent","props","state","selectedTask","getTasksDataKey","getTaskByIdDataKeys","getPayloadsDataKey","getIntPayloadCountKey","getStringPayloadCountKey","intPayloadOptions","stringPayloadOptions","key","value","text","decisionType","Text","decisionTypes","DECISIONTYPES","operator","OPERATORS","gatewayTypes","GATEWAYTPYES","contract","drizzle","contracts","ContractCollaborationManager","methods","getTasks","cacheCall","intPayloadCountKey","getGlobalIntegerPayloadCount","getTaskCountKey","getTaskCount","ccmState","drizzleState","taskCount","Number","i","push","getTaskById","setIntegerPayloadOptions","setStringPayloadOptions","setState","call","then","count","getGlobalIntPayloadValueById","payload","getGlobalStringPayloadCount","getGlobalStringPayloadValueById","tasks","getAllTasks","options","forEach","task","id","description","taskOptions","getTaskDropdownOptions","event","data","active","a","b","console","log","selectedIntPayload","selectedStringPayload","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport * as c from './Constants.js'\nimport { Dropdown, Button } from 'semantic-ui-react'\nimport Tasks from \"./Tasks\"\n\n\nclass AddDecisionComponent extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            selectedTask: null,\n            getTasksDataKey: \"\",\n            getTaskByIdDataKeys: \"\",\n            getPayloadsDataKey: \"\",\n            getIntPayloadCountKey: \"\",\n            getStringPayloadCountKey: \"\",\n            intPayloadOptions: [],\n            stringPayloadOptions: [{ key: 1, value: 2, text: `ID: 0| Payload: ${3}` }],\n            decisionType: { Text: \"\" }\n        }\n        this.decisionTypes = c.DECISIONTYPES;\n        this.operator = c.OPERATORS;\n        this.gatewayTypes = c.GATEWAYTPYES\n    }\n\n    componentDidMount() {\n        const contract = this.props.drizzle.contracts.ContractCollaborationManager;\n        const getTasksDataKey = contract.methods.getTasks.cacheCall();\n        const intPayloadCountKey = contract.methods.getGlobalIntegerPayloadCount.cacheCall();\n\n        const getTaskCountKey = contract.methods.getTaskCount.cacheCall();\n        const ccmState = this.props.drizzleState.contracts.ContractCollaborationManager;\n\n        let taskCount = ccmState.getTaskCount[getTaskCountKey];\n        taskCount = (taskCount) ? Number(taskCount.value) : 150;\n        const getTaskByIdDataKeys = [];\n\n        for (let i = 0; i <= taskCount; i++) {\n            getTaskByIdDataKeys.push(contract.methods.getTaskById.cacheCall(i));\n        }\n        this.setIntegerPayloadOptions(contract, ccmState);\n        this.setStringPayloadOptions(contract, ccmState);\n        this.setState({\n            getTasksDataKey,\n            getTaskByIdDataKeys,\n            intPayloadCountKey,\n\n        });\n    }\n\n    setIntegerPayloadOptions(contract, ccmState) {\n        contract.methods.getGlobalIntegerPayloadCount().call().then((count) => {\n            let intPayloadOptions = [];\n\n            for (let i = 0; i < count; i++) {\n                let key = contract.methods.getGlobalIntPayloadValueById.cacheCall(i);\n\n                let payload = ccmState.getGlobalIntPayloadValueById[key];\n                if (payload) {\n                    intPayloadOptions.push({ key: i, value: payload.value, text: `ID: ${i} | Payload: ${payload.value}` });\n                }\n            }\n            this.setState({ intPayloadOptions });\n        });\n    }\n\n    setStringPayloadOptions(contract, ccmState) {\n        contract.methods.getGlobalStringPayloadCount().call().then((count) => {\n            let stringPayloadOptions = [];\n            this.setState({ stringPayloadOptions });\n\n            for (let i = 0; i < count; i++) {\n                let key = contract.methods.getGlobalStringPayloadValueById.cacheCall(i);\n\n                // contract.methods.getGlobalStringPayloadValueById(i).call().then((payload) => {\n                //     console.log(\"payload!!!\", payload);\n\n                //     let a = []\n                //     a = a.concat(this.state.stringPayloadOptions);\n                //     console.log(\"asdfasdfasdfasdf\", a);\n\n                //     a = a.push({ key: payload, value: payload, text: `ID: ${i}| Payload: ${payload}` });\n                //     this.setState({ stringPayloadOptions: a });\n                //     //this.setState({ stringPayloadOptions: this.state.stringPayloadOptions.push({ key: payload, value: payload, text: `ID: 0| Payload: ${payload}` }) });\n\n                // });\n\n                let payload = ccmState.getGlobalStringPayloadValueById[key];\n                if (payload) {\n                    stringPayloadOptions.push({ key: i, value: payload.value, text: `ID: ${i} | Payload: ${payload.value}` });\n                }\n            }\n            this.setState({ stringPayloadOptions });\n        });\n    }\n\n    getTaskDropdownOptions() {\n        let tasks = Tasks.getAllTasks(this.props.drizzleState, this.state.getTaskByIdDataKeys, this.state.getTasksDataKey);\n        let options = [];\n\n        tasks.forEach(task => {\n            options.push({ key: task.id, value: task.id, text: `ID: ${task.id} | Description: ${task.description}` });\n        });\n        return options;\n    }\n\n\n    render() {\n        let taskOptions = this.getTaskDropdownOptions();\n\n        return (\n            <form className=\"add-decision-form\" >\n                <label className=\"select-task-label\">\n                    <Dropdown placeholder='Select Task' onChange={\n                        (event, data) => {\n                            this.setState({ selectedTask: data.value });\n                        }\n                    } fluid selection options={taskOptions} value={this.state.selectedTask} />\n                </label>\n\n                <label>\n                    <Dropdown placeholder='Select Type' fluid selection onChange={\n                        (event, data) => {\n\n                            this.setState({ decisionType: data.value });\n                        }} fluid selection options={c.DECISIONTYPES} value={this.state.decisionType} />\n                </label>\n\n\n                <label>\n                    <Button.Group>\n                        <Button\n                            active={active}\n                            type=\"button\"\n                            color={active ? 'red' : null}\n                            onClick={() => {\n\n                            }}>Cancel</Button>\n                        <Button.Or />\n                        <Button\n                            active={active}\n                            type=\"button\"\n                            color={active ? 'red' : null}\n                            onClick={(a, b) => {\n                                console.log(a, b);\n\n                            }}>Save</Button>\n                    </Button.Group>\n                </label>\n\n\n                {this.state.decisionType === 1 && <label className=\"select-payload-label\">\n                    <Dropdown placeholder='Select Global Payload' onChange={\n                        (event, data) => {\n                            this.setState({ selectedIntPayload: data.value });\n                        }} fluid selection options={this.state.intPayloadOptions} value={this.state.selectedIntPayload} />\n                </label>}\n\n                {this.state.decisionType === 0 && <label className=\"select-payload-label\">\n                    < Dropdown placeholder='Select Global Payload' onChange={\n                        (event, data) => {\n                            this.setState({ selectedStringPayload: data.value });\n                        }} fluid selection options={this.state.stringPayloadOptions} value={this.state.selectedStringPayload} />\n                </label >}\n\n                {/* <button type=\"button\" onClick={this.handleCreateTask}>\n                    Add Decision\n                 </button> */}\n            </form >\n        );\n    }\n}\n\n\n\nexport default AddDecisionComponent;"]},"metadata":{},"sourceType":"module"}