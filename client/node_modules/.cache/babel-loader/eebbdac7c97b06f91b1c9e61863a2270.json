{"ast":null,"code":"import _classCallCheck from \"/home/nicolas/Dokumente/Github/drizzle_react/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/nicolas/Dokumente/Github/drizzle_react/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/nicolas/Dokumente/Github/drizzle_react/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/nicolas/Dokumente/Github/drizzle_react/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/nicolas/Dokumente/Github/drizzle_react/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/nicolas/Dokumente/Github/drizzle_react/client/src/AddDecisionComponent.js\";\nimport React from \"react\";\nimport * as c from './Constants.js';\nimport { Dropdown } from 'semantic-ui-react';\nimport Tasks from \"./Tasks\";\n\nvar AddDecisionComponent =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AddDecisionComponent, _React$Component);\n\n  function AddDecisionComponent(props) {\n    var _this;\n\n    _classCallCheck(this, AddDecisionComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddDecisionComponent).call(this, props));\n    _this.state = {\n      selectedTask: null,\n      getTasksDataKey: \"\",\n      getTaskByIdDataKeys: \"\",\n      getPayloadsDataKey: \"\",\n      getIntPayloadCountKey: \"\",\n      getStringPayloadCountKey: \"\"\n    };\n    _this.decisionTypes = c.DECISIONTYPES;\n    _this.operator = c.OPERATORS;\n    _this.gatewayTypes = c.GATEWAYTPYES;\n    return _this;\n  }\n\n  _createClass(AddDecisionComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var contract = this.props.drizzle.contracts.ContractCollaborationManager;\n      var getTasksDataKey = contract.methods.getTasks.cacheCall();\n      var intPayloadCountKey = contract.methods.getGlobalIntegerPayloadCount.cacheCall();\n      var stringPayloadCountKey = contract.methods.getGlobalStringPayloadCount.cacheCall();\n      console.log(\"IntPAyload COtnasdfefadf\", intPayloadCountKey);\n      var getTaskCountKey = contract.methods.getTaskCount.cacheCall();\n      var ccmState = this.props.drizzleState.contracts.ContractCollaborationManager;\n      var taskCount = ccmState.getTaskCount[getTaskCountKey];\n      taskCount = taskCount ? Number(taskCount.value) : 150;\n      var getTaskByIdDataKeys = [];\n\n      for (var i = 0; i <= taskCount; i++) {\n        getTaskByIdDataKeys.push(contract.methods.getTaskById.cacheCall(i));\n      }\n\n      this.setIntegerPayloadOptions(contract, ccmState);\n      this.setState({\n        getTasksDataKey: getTasksDataKey,\n        getTaskByIdDataKeys: getTaskByIdDataKeys,\n        intPayloadCountKey: intPayloadCountKey,\n        stringPayloadCountKey: stringPayloadCountKey,\n        stringPayloadKeys: this.getStringPayloadKeys(contract, ccmState, stringPayloadCountKey)\n      });\n    }\n  }, {\n    key: \"setIntegerPayloadOptions\",\n    value: function setIntegerPayloadOptions(contract, ccmState) {\n      var _this2 = this;\n\n      contract.methods.getGlobalIntegerPayloadCount().call().then(function (count) {\n        var intPayloadOptions = [];\n\n        for (var i = 0; i < count; i++) {\n          var key = contract.methods.getGlobalIntPayloadValueById.cacheCall(i);\n          var payload = ccmState.getGlobalIntPayloadValueById[key];\n\n          if (payload) {\n            intPayloadOptions.push({\n              key: i,\n              value: payload.value,\n              text: \"ID: \".concat(i, \" | Payload: \").concat(payload.value)\n            });\n          }\n        }\n\n        _this2.setState({\n          intPayloadOptions: intPayloadOptions\n        });\n      });\n    }\n  }, {\n    key: \"setStringPayloadOptions\",\n    value: function setStringPayloadOptions(contract, ccmState) {\n      var _this3 = this;\n\n      contract.methods.getGlobalStringPayloadCount().call().then(function (count) {\n        var stringPayloadOptions = [];\n\n        for (var i = 0; i < count; i++) {\n          var key = contract.methods.getGlobalStringPayloadValueById.cacheCall(i);\n          var payload = ccmState.getGlobalStringPayloadValueById[key];\n\n          if (payload) {\n            stringPayloadOptions.push({\n              key: i,\n              value: payload.value,\n              text: \"ID: \".concat(i, \" | Payload: \").concat(payload.value)\n            });\n          }\n        }\n\n        _this3.setState({\n          stringPayloadOptions: stringPayloadOptions\n        });\n      });\n    }\n  }, {\n    key: \"getStringPayloadKeys\",\n    value: function getStringPayloadKeys(contract, ccmState, countKey) {\n      var stringPayloadKeys = [];\n      var count = ccmState.getGlobalStringPayloadCount[countKey];\n      count = count ? count.value : 5;\n\n      for (var i = 0; i < count; i++) {\n        stringPayloadKeys.push(contract.methods.getGlobalStringPayloadValueById.cacheCall(i));\n      }\n\n      return stringPayloadKeys;\n    }\n  }, {\n    key: \"getTaskDropdownOptions\",\n    value: function getTaskDropdownOptions() {\n      var tasks = Tasks.getAllTasks(this.props.drizzleState, this.state.getTaskByIdDataKeys, this.state.getTasksDataKey);\n      var options = [];\n      tasks.forEach(function (task) {\n        options.push({\n          key: task.id,\n          value: task.id,\n          text: \"ID: \".concat(task.id, \" | Description: \").concat(task.description)\n        });\n      });\n      return options;\n    }\n  }, {\n    key: \"setIntpayloads\",\n    value: function setIntpayloads() {\n      var _this4 = this;\n\n      if (this.state.intPayloadKeys) {\n        var contract = this.props.drizzle.contracts.ContractCollaborationManager;\n        this.setState({\n          intPayloads: []\n        });\n\n        var _loop = function _loop(i) {\n          contract.methods.getGlobalIntPayloadValueById(i).call().then(function (payload) {\n            console.log(\"Payload\", payload);\n\n            _this4.setState({\n              intPayloads: _this4.state.intPayloads.push({\n                payload: payload,\n                id: i\n              })\n            });\n          });\n        };\n\n        for (var i = 0; i < this.state.intPayloadKeys.length; i++) {\n          _loop(i);\n        }\n      }\n    }\n  }, {\n    key: \"getIntPayloadDropdownOptions\",\n    value: function getIntPayloadDropdownOptions() {// const ccmState = this.props.drizzleState.contracts.ContractCollaborationManager;\n      // const count = ccmState.getGlobalIntegerPayloadCount[this.state.intPayloadCountKey];\n      // const payloads = [];\n      // if (count) {\n      //     console.log(\"PARTY\", count);\n      //     for (let i = 0; i < count.value - 1; i++) {\n      //         let payload = ccmState.getGlobalIntPayloadValueById[this.state.intPayloadKeys[i]];\n      //         if (payload) {\n      //             payloads.push({ key: i, value: payload.value, text: `ID: ${i} | Payload: ${payload.value}` });\n      //         }\n      //     }\n      // }\n      // return payloads;\n    }\n  }, {\n    key: \"getStringPayloadDropdownOptions\",\n    value: function getStringPayloadDropdownOptions() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var taskOptions = this.getTaskDropdownOptions();\n      var intPayloadOptions = this.getIntPayloadDropdownOptions();\n      console.log(intPayloadOptions); //let stringPayloadOptions = this.getStringPayloadDropdownOptions();\n\n      return React.createElement(\"form\", {\n        className: \"add-decision-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"select-task-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(Dropdown, {\n        placeholder: \"Select Task\",\n        onChange: function onChange(event, data) {\n          _this5.setState({\n            selectedTask: data.value\n          });\n        },\n        fluid: true,\n        selection: true,\n        options: taskOptions,\n        value: this.state.selectedTask,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        className: \"select-payload-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(Dropdown, {\n        placeholder: \"Select Global Payload\",\n        onChange: function onChange(event, data) {\n          _this5.setState({\n            selectedPayload: data.value\n          });\n        },\n        fluid: true,\n        selection: true,\n        options: this.state.payloadOptions,\n        value: this.state.selectedPayload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        type: \"button\",\n        onClick: this.handleCreateTask,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"Add Decision\"));\n    }\n  }]);\n\n  return AddDecisionComponent;\n}(React.Component);\n\nexport default AddDecisionComponent;","map":{"version":3,"sources":["/home/nicolas/Dokumente/Github/drizzle_react/client/src/AddDecisionComponent.js"],"names":["React","c","Dropdown","Tasks","AddDecisionComponent","props","state","selectedTask","getTasksDataKey","getTaskByIdDataKeys","getPayloadsDataKey","getIntPayloadCountKey","getStringPayloadCountKey","decisionTypes","DECISIONTYPES","operator","OPERATORS","gatewayTypes","GATEWAYTPYES","contract","drizzle","contracts","ContractCollaborationManager","methods","getTasks","cacheCall","intPayloadCountKey","getGlobalIntegerPayloadCount","stringPayloadCountKey","getGlobalStringPayloadCount","console","log","getTaskCountKey","getTaskCount","ccmState","drizzleState","taskCount","Number","value","i","push","getTaskById","setIntegerPayloadOptions","setState","stringPayloadKeys","getStringPayloadKeys","call","then","count","intPayloadOptions","key","getGlobalIntPayloadValueById","payload","text","stringPayloadOptions","getGlobalStringPayloadValueById","countKey","tasks","getAllTasks","options","forEach","task","id","description","intPayloadKeys","intPayloads","length","taskOptions","getTaskDropdownOptions","getIntPayloadDropdownOptions","event","data","selectedPayload","payloadOptions","handleCreateTask","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport * as c from './Constants.js'\nimport { Dropdown } from 'semantic-ui-react'\nimport Tasks from \"./Tasks\"\n\n\nclass AddDecisionComponent extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            selectedTask: null,\n            getTasksDataKey: \"\",\n            getTaskByIdDataKeys: \"\",\n            getPayloadsDataKey: \"\",\n            getIntPayloadCountKey: \"\",\n            getStringPayloadCountKey: \"\"\n        }\n        this.decisionTypes = c.DECISIONTYPES;\n        this.operator = c.OPERATORS;\n        this.gatewayTypes = c.GATEWAYTPYES\n    }\n\n    componentDidMount() {\n        const contract = this.props.drizzle.contracts.ContractCollaborationManager;\n        const getTasksDataKey = contract.methods.getTasks.cacheCall();\n        const intPayloadCountKey = contract.methods.getGlobalIntegerPayloadCount.cacheCall();\n        const stringPayloadCountKey = contract.methods.getGlobalStringPayloadCount.cacheCall();\n        console.log(\"IntPAyload COtnasdfefadf\", intPayloadCountKey);\n\n        const getTaskCountKey = contract.methods.getTaskCount.cacheCall();\n        const ccmState = this.props.drizzleState.contracts.ContractCollaborationManager;\n\n        let taskCount = ccmState.getTaskCount[getTaskCountKey];\n        taskCount = (taskCount) ? Number(taskCount.value) : 150;\n        const getTaskByIdDataKeys = [];\n\n        for (let i = 0; i <= taskCount; i++) {\n            getTaskByIdDataKeys.push(contract.methods.getTaskById.cacheCall(i));\n        }\n        this.setIntegerPayloadOptions(contract, ccmState);\n        this.setState({\n            getTasksDataKey,\n            getTaskByIdDataKeys,\n            intPayloadCountKey,\n            stringPayloadCountKey,\n            stringPayloadKeys: this.getStringPayloadKeys(contract, ccmState, stringPayloadCountKey)\n        });\n    }\n\n    setIntegerPayloadOptions(contract, ccmState) {\n        contract.methods.getGlobalIntegerPayloadCount().call().then((count) => {\n            let intPayloadOptions = [];\n\n            for (let i = 0; i < count; i++) {\n                let key = contract.methods.getGlobalIntPayloadValueById.cacheCall(i);\n\n                let payload = ccmState.getGlobalIntPayloadValueById[key];\n                if (payload) {\n                    intPayloadOptions.push({ key: i, value: payload.value, text: `ID: ${i} | Payload: ${payload.value}` });\n                }\n            }\n            this.setState({ intPayloadOptions });\n        });\n    }\n\n    setStringPayloadOptions(contract, ccmState) {\n        contract.methods.getGlobalStringPayloadCount().call().then((count) => {\n            let stringPayloadOptions = [];\n\n            for (let i = 0; i < count; i++) {\n                let key = contract.methods.getGlobalStringPayloadValueById.cacheCall(i);\n\n                let payload = ccmState.getGlobalStringPayloadValueById[key];\n                if (payload) {\n                    stringPayloadOptions.push({ key: i, value: payload.value, text: `ID: ${i} | Payload: ${payload.value}` });\n                }\n            }\n            this.setState({ stringPayloadOptions });\n        });\n    }\n\n    getStringPayloadKeys(contract, ccmState, countKey) {\n        let stringPayloadKeys = [];\n        let count = ccmState.getGlobalStringPayloadCount[countKey];\n        count = (count) ? count.value : 5;\n        for (let i = 0; i < count; i++) {\n            stringPayloadKeys.push(contract.methods.getGlobalStringPayloadValueById.cacheCall(i));\n        }\n\n        return stringPayloadKeys;\n    }\n\n    getTaskDropdownOptions() {\n        let tasks = Tasks.getAllTasks(this.props.drizzleState, this.state.getTaskByIdDataKeys, this.state.getTasksDataKey);\n        let options = [];\n\n        tasks.forEach(task => {\n            options.push({ key: task.id, value: task.id, text: `ID: ${task.id} | Description: ${task.description}` });\n        });\n        return options;\n    }\n\n\n    setIntpayloads() {\n        if (this.state.intPayloadKeys) {\n            const contract = this.props.drizzle.contracts.ContractCollaborationManager;\n            this.setState({ intPayloads: [] });\n            for (let i = 0; i < this.state.intPayloadKeys.length; i++) {\n                contract.methods.getGlobalIntPayloadValueById(i).call().then((payload) => {\n                    console.log(\"Payload\", payload);\n\n                    this.setState({ intPayloads: this.state.intPayloads.push({ payload, id: i }) })\n                });\n\n            }\n        }\n\n    }\n\n    getIntPayloadDropdownOptions() {\n\n\n\n        // const ccmState = this.props.drizzleState.contracts.ContractCollaborationManager;\n        // const count = ccmState.getGlobalIntegerPayloadCount[this.state.intPayloadCountKey];\n\n        // const payloads = [];\n        // if (count) {\n\n        //     console.log(\"PARTY\", count);\n\n        //     for (let i = 0; i < count.value - 1; i++) {\n\n        //         let payload = ccmState.getGlobalIntPayloadValueById[this.state.intPayloadKeys[i]];\n        //         if (payload) {\n        //             payloads.push({ key: i, value: payload.value, text: `ID: ${i} | Payload: ${payload.value}` });\n        //         }\n        //     }\n        // }\n\n        // return payloads;\n    }\n    getStringPayloadDropdownOptions() {\n    }\n\n    render() {\n        let taskOptions = this.getTaskDropdownOptions();\n        let intPayloadOptions = this.getIntPayloadDropdownOptions();\n        console.log(intPayloadOptions);\n\n        //let stringPayloadOptions = this.getStringPayloadDropdownOptions();\n\n        return (\n            <form className=\"add-decision-form\" >\n                <label className=\"select-task-label\">\n                    <Dropdown placeholder='Select Task' onChange={\n                        (event, data) => {\n                            this.setState({ selectedTask: data.value });\n                        }\n                    } fluid selection options={taskOptions} value={this.state.selectedTask} />\n                </label>\n\n                <label className=\"select-payload-label\">\n                    <Dropdown placeholder='Select Global Payload' onChange={\n                        (event, data) => {\n                            this.setState({ selectedPayload: data.value });\n                        }} fluid selection options={this.state.payloadOptions} value={this.state.selectedPayload} />\n                </label>\n                {/* \n                <label className=\"add-task-label\">\n                    <Dropdown placeholder='Requirements' onChange={\n                        (event, data) => {\n                            this.setState({ requirements: data.value });\n                        }\n                    }\n                        fluid multiple selection options={newOptions} value={this.state.requirements} />\n                </label> */}\n                <button type=\"button\" onClick={this.handleCreateTask}>\n                    Add Decision\n                 </button>\n            </form >\n        );\n    }\n}\n\n\n\nexport default AddDecisionComponent;"]},"metadata":{},"sourceType":"module"}